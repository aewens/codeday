// Generated by CoffeeScript 1.7.1
(function() {
  define(["keys"], function(K) {
    var Events;
    Events = (function() {
      function Events(grid) {
        console.log("Initializing events...");
        this.grid = grid;
        this.special = [];
        this.fillSpecial();
        this.pos = 0;
      }

      Events.prototype.fillSpecial = function() {
        var n, nums, _i, _len, _results;
        nums = [K.f1, K.f2, K.f3, K.f4, K.f5, K.f6, K.f7, K.f8, K.f9, K.f10, K.f11, K.f12, K.bquote, K.quote, K.open, K.close, K.tab, K.enter, K.del, K.ctrl, K.meta, K.shift, K.alt, K.up, K.down, K.left, K.right];
        _results = [];
        for (_i = 0, _len = nums.length; _i < _len; _i++) {
          n = nums[_i];
          _results.push(this.special[n] = true);
        }
        return _results;
      };

      Events.prototype.type = function(key) {
        this.pos = this.pos + 1;
        return this.grid.type(this.pos, K.translate(key));
      };

      Events.prototype.reload = function(key) {
        if (K.pressed[K.ctrl] && (key === K.r)) {
          return window.location.reload();
        }
      };

      Events.prototype.press = function() {
        var self;
        self = this;
        $(document).on("keydown", function(e) {
          var key;
          e.preventDefault();
          key = e.keyCode;
          self.reload(key);
          if (!self.special[key]) {
            self.type(key);
          }
          return K.set(key, true);
        });
        return $(document).on("keyup", function(e) {
          var key;
          key = e.keyCode;
          return K.set(key, false);
        });
      };

      return Events;

    })();
    return Events;
  });

}).call(this);
